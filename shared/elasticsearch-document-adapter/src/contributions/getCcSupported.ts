import { ContributionDocumentJson } from "@shared/types";
import { DocumentElasticWithSource } from "../types/Glossary";

// TODO: à enlever lorsqu'on supporte la nouvelle CC de la métallurgie (3248)
const OLD_METALLURGIE_INDEX_4 = [
  "0054",
  "0650",
  "0714",
  "0822",
  "0828",
  "0829",
  "0860",
  "0863",
  "0878",
  "0911",
  "0937",
  "0948",
  "0965",
  "0979",
  "1059",
  "1159",
  "1274",
  "1315",
  "1365",
  "1369",
  "1387",
  "1472",
  "1560",
  "1564",
  "1577",
  "1592",
  "1604",
  "1626",
  "1628",
  "1634",
  "1635",
  "1732",
  "1813",
  "1885",
  "1902",
  "1966",
  "2003",
  "2126",
  "2221",
  "2266",
  "2542",
  "2579",
  "2615",
  "2630",
  "2700",
  "2755",
  "2992",
  "3053",
  "3209",
  "3231",
];
// TODO: à enlever lorsqu'on supporte la nouvelle CC de la métallurgie (3248)
const OLD_METALLURGIE_INDEX_23 = [
  "0054",
  "0650",
  "0714",
  "0822",
  "0827",
  "0828",
  "0829",
  "0836",
  "0860",
  "0863",
  "0878",
  "0887",
  "0898",
  "0899",
  "0911",
  "0914",
  "0920",
  "0923",
  "0930",
  "0934",
  "0937",
  "0943",
  "0948",
  "0965",
  "0979",
  "0984",
  "1007",
  "1059",
  "1159",
  "1164",
  "1274",
  "1315",
  "1353",
  "1365",
  "1369",
  "1387",
  "1472",
  "1525",
  "1560",
  "1564",
  "1572",
  "1576",
  "1577",
  "1578",
  "1592",
  "1604",
  "1626",
  "1627",
  "1628",
  "1634",
  "1635",
  "1732",
  "1813",
  "1867",
  "1885",
  "1902",
  "1912",
  "1960",
  "1966",
  "1967",
  "2003",
  "2126",
  "2266",
  "2294",
  "2489",
  "2542",
  "2579",
  "2615",
  "2630",
  "2700",
  "2755",
  "2980",
  "2992",
  "3209",
  "3231",
];
export const getCcSupported = (
  allContributions: DocumentElasticWithSource<ContributionDocumentJson>[],
  genericContrib: DocumentElasticWithSource<ContributionDocumentJson>
): string[] => {
  const ccSupported = allContributions
    .filter((v) => v.questionIndex === genericContrib.questionIndex)
    .filter((v) => v.contentType !== "UNKNOWN")
    .map((v) => v.idcc);
  const filteredOldMetallurgieAgreements =
    genericContrib.questionIndex === 4
      ? OLD_METALLURGIE_INDEX_4
      : genericContrib.questionIndex === 23
      ? OLD_METALLURGIE_INDEX_23
      : [];
  return [...ccSupported, ...filteredOldMetallurgieAgreements];
};
