scripts:
  build:
    default: lerna run --stream build
    internals: lerna run --stream --scope @cdtn-admin/* build
    targets: lerna run --stream --scope targets.* build

  dev:
    default: concurrent
      "lerna run --stream dev"
      "sleep 5s && docker-compose up --build postgres hasura"

  e2e:
    default: lerna run --stream --parallel e2e

  lint:
    default: lerna run --stream --parallel lint

  test:
    default: lerna run --stream --parallel test

  pre-commit:
    default: lerna run --concurrency 1 --stream pre-commit --since HEAD --exclude-dependents

  pre-push:
    default: nps build && nps lint && nps test && nps e2e
