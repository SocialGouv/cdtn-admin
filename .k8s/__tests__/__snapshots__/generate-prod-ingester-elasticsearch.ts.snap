// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`INGESTER_ELASTICSEARCH_TARGET=preprod kosko generate --env prod jobs/ingester-elasticsearch 1`] = `
"---
apiVersion: v1
kind: ConfigMap
metadata:
  name: ingester-elasticsearch-to-preprod
  namespace: cdtn-admin
  annotations:
    app.gitlab.com/app: socialgouv-cdtn-admin
    app.gitlab.com/env: prod
    app.gitlab.com/env.name: prod
    kapp.k14s.io/disable-default-ownership-label-rules: ''
    kapp.k14s.io/disable-default-label-scoping-rules: ''
  labels:
    application: cdtn-admin
    component: cdtn-admin
    owner: cdtn-admin
    team: cdtn-admin
    app: ingester-elasticsearch-preprod
data:
  CDTN_ADMIN_ENDPOINT: http://hasura/v1/graphql
  NLP_URL: https://preprod-serving-ml.dev.fabrique.social.gouv.fr
  NODE_ENV: production
  LOG_LEVEL: info
---
apiVersion: bitnami.com/v1alpha1
kind: SealedSecret
metadata:
  name: ingester-elasticsearch-to-preprod
  namespace: cdtn-admin
  annotations:
    app.gitlab.com/app: socialgouv-cdtn-admin
    app.gitlab.com/env: prod
    app.gitlab.com/env.name: prod
    kapp.k14s.io/disable-default-ownership-label-rules: ''
    kapp.k14s.io/disable-default-label-scoping-rules: ''
  labels:
    application: cdtn-admin
    component: cdtn-admin
    owner: cdtn-admin
    team: cdtn-admin
    app: ingester-elasticsearch-preprod
spec:
  encryptedData:
    ELASTICSEARCH_TOKEN_INGEST: >-
      AgCQSz5WIJBFNy+qmPjuJXxiO+4FkXtuCUSLSh8xlICM92c/sE0kz1nsrZfU8m3OBJ11HRQeHI9+UtrVeljC0dzG3Yin7IKI/IV4cnE1Thdjya3L9zuSmfFUXlRYkAkP27BbaxBPGATgEddtBHu3aJ5FlV+GsnbHJcp3S5s37X2GYxCyqDmc1XX837mJmYHEsfDbDa1Iqo5aI/FhjlUw8tZ2LMDlDSht2RQ9R85pRHx2s3QrmYxtqEsR8GdXmOL+4VwBbf+ZB/psn45nS+U+x8gUr++PQcTdVT5WN/37ULPlx09vXh/BRQ8OGgc1Bno4onaHIpAcN5Dkbsr1ZNKVXKBh4oF4PD//rcGKZKPYTa55NTMBv/Bgsp0GR5Y127BT90pW3e/oh9Ql0H4+T8cMP8wbyuqZ+Yho5fBXoIoQdqUttn/NfwKs9JWmCcyKTf80aMUOgyLky1Hc5vse6J3tOH/mnv/WD6RAJi4gj/0nYZKoSZ9riOqRyR1ApsdlaXQT3clm4H9qExTLv4sXc+V/PZX5kYpprmNTJJs31RxsKkmEY896eQEwjdGAkMxTSQsae2ju3U55eTJA3yZ7QdWJN95VhfsputMrsEh7gMz0AByWa4tI1iKBdLhlpbHr2Fpbhx0iF4UEEw7XJhkF25/bXf7Lo8GqcJFRn31Aq/LAs/e28oS03BlJ+p21v4jljm+DshlvGfejVy2WeN99jEo3ggKjQ6SKYMAxIOSUPrmYiV7/ucHEutyTd/+iNqlAyCvUiBcLpuizZUioJZW7Q5U=
    ELASTICSEARCH_URL: >-
      AgBIk4c96xAndWKKP6p9DX3dt91v3GPtw6wwEuD5G9c63FsGhcUxelH4fVpjf09/bMKn4vURfAgcrbmvKe6QDQZ9BmsY9E6ov0tQGyc4kz7fwH5YQRMzkN8ZTdVHGJs+oeKkE5JW+NFvwuGJQ9EUkMvRgR+sp0UuCeY41CUv53OZSVBkG2837rSWNWECba+Ptn8g1/q4x0hccmgm4oAoQLKSF6uGh/PGSroehC1SDD70w4z0eVzBufAykBlaxa0Wfr50/7cQmHaHqqswLz+RgpXf/Cej85yEz8pbCxfvVIiYGMIzieolyY+JGY+1vmP5UqhRrLGTQjbLU/ZrAnWejbvBS0nRiGiQqZZlQygiwJKKG5pZ1+MWEvrnfHd3A15FpmQ49c1No9TlbXKJ2/RbJIHnNN2GvsmRkBLhvg1s+UkA0TpAAAnja5m+1PQ2lWQlOKNAEU9nqqetq7UOGB4Iw+2VV3DKKs4JvybKEfebyAR+0VEpQ63KROhwTfv+uHI0d5J4pGW0PK2AkeJVdvhOfEGyzuVBNYRSKLJ1g7w0+hRg8GQq2xwZlcYTS2GZWGhLvmJcLtRq59G6vk7bhCpGyx3ITlkZ3UwzaMEsjm4Ac1dSlZhXpZaS4GIRjS3jUZxvag6wkzNcpu7WGcGFlntPavBMillRx0dM9LV47bSWXRdHAVOvLVCKE5dCmEsVVH/WQjPf82OAjnG+uqNOLnpTZCxoWBEJlTmtoby6iKGTMoHX++WtdU/+/MGPGKe1xnuAcyJq+dLN28WFMn5y1xuRzV0TLRFz
    ES_LOGS: >-
      AgCrXoDVdEdb7b53Ku821AXCv55K+6YSVhMsPLNTbiuZeaUBX93esz5fK2LzqIUCpNo1aU4T+JY0Z1vTQCu/1s6+ha2GQniUSLgNzqH1w29sSFAHV74mNS3qqQpguSwM6ytnkTpZTJ4JWpt4eKNyET6kyqs2NsYeExMJD4oGffGgatXgBaANB7dW9Vx9APMcsxX+o9HC4jloqUv8CgL+gYRJg9DRwfZInbi7RbXeOc2aKetcnWF56i1HAfO3Iw3D0Sh613jroV1jRiZlmMu4oGONwxsSO4CroSsY/mhHs3oWbCQ6enJMFIVJ9Ugy+u9GcuSWBmfgMko7JNnrh4Tc4tXIgLEu0qoNKJItZFyKI+sbwcQV79SCTXEDDMUis3OvuOxuTxNurQiuaL/VLa8Qepn1zooEUpIQG+AG6q6036BVxjex3pFsgqyqdInJtKIBfWyrZ0nrbgMiOCJepxnHXNUGtcaeOcYFpUgUmtoP4O3f4mc0gSJomm1WxrDFL18f3hbX/8mSJ2ZksTJbvbgIA0gotTRRctT7wqfPAv0c3y/JpXnJ1Jvd6cMtJEjFCOGpTY7gwGzGT5mfrbQBNAHJa77jeUivw/8vKkYh+PWqo5kuiFs42HzstSZIWYPg88J7pfhun69ICfQXyPqlShd46SJEkyqZWKcNBYk5yEzl5qfT5Acuv++Uy8lDwDaEAzFiSg53TjnF0ssF9rX+LXGhJLMp7jljr0anZtrSdqU/DHkjUFJDGo+QU0yzFpL0+62M8qFfqnn4/pP9H37lgV5VesG+F8wal0z43Y3PaRQ4nV1utA==
    ES_LOGS_TOKEN: >-
      AgAuotGlHHkiZZTPFBVwOFyOG7xxiEP4pToci1VcvcbdmKUJ05jEa7ZxN8JXZZGAJDfamm6tdQWygnSCLc41/hr1byMY6az8arIIMc80yKiWD5qiMTwhFgPqSN5IwTvt4SX/kM1dcZ5pmfrAYPfpwCWwDHT0EguIeo4t10hEyloX3njtRar3t12LHqXYa95E7bB98dpmMpY1fs3axMvyUUNIuhHjk8HpyOmjSU/MdFaMUT4VX3D0/I1UA+cUS8SkHpC3baNTMFxw7e5UmKHwl1wh3uwszf0t14WWakBaETONMq+WId2jTDTQcn5cQ/Md8f5uVbcll1FY0lvpt6shzzgDFgVG/ZE10l8ldcfdbr+wP8ugWpYYalGR0DjkQZiZfdB2h2/X6TWR84N914Au2tzHPS5K8X8LWFxn7qNG6JUxFef0/G4CuQtu7lXZCRlqoM5OcjGKumxab26xcjZt0BOT9IYhzVNZhxIcRFQXyXiMEuj+mTgUIShGuYNmSf/7cdLsjxsDBlZEJIb273e1nkC9fxHgFaALb6ip38EW2KqXtuBdfQy1zmXypblVNhZSvv8t8D6tV8w+6OwHXJj4Q+U6SFPuRjxH9x4Un2QeZQXcZRYWsmyF5gi5lBgRb7DKYQ0OTf+nJ6d2FpgLLASkJnls2vtGMtH5X4a11I7TAW8l9/MF9fCbWv0O3lXhH2D7pJPbzv5w+Z40gDfd561KWC+Blnu7m3ZxfWF7amJvX5ZtTgK6anOrodHq3XHUM/u+DrTNmmzHp7Wz9ko9xL4=
  template:
    metadata:
      name: ingester-elasticsearch-to-preprod
      annotations:
        app.gitlab.com/app: socialgouv-cdtn-admin
        app.gitlab.com/env: prod
        app.gitlab.com/env.name: prod
        kapp.k14s.io/disable-default-ownership-label-rules: ''
        kapp.k14s.io/disable-default-label-scoping-rules: ''
      labels:
        application: cdtn-admin
        component: cdtn-admin
        owner: cdtn-admin
        team: cdtn-admin
        app: ingester-elasticsearch-preprod
    type: Opaque
---
apiVersion: batch/v1
kind: Job
metadata:
  annotations:
    app.gitlab.com/app: socialgouv-cdtn-admin
    app.gitlab.com/env: prod
    app.gitlab.com/env.name: prod
    kapp.k14s.io/disable-default-ownership-label-rules: ''
    kapp.k14s.io/disable-default-label-scoping-rules: ''
    kapp.k14s.io/update-strategy: fallback-on-replace
  labels:
    application: cdtn-admin
    component: cdtn-admin
    owner: cdtn-admin
    team: cdtn-admin
    app: ingester-elasticsearch-preprod
  name: ingester-elasticsearch-preprod
  namespace: cdtn-admin
spec:
  backoffLimit: 0
  template:
    metadata:
      name: ingester-elasticsearch-preprod
      annotations:
        app.gitlab.com/app: socialgouv-cdtn-admin
        app.gitlab.com/env: prod
        app.gitlab.com/env.name: prod
        kapp.k14s.io/disable-default-ownership-label-rules: ''
        kapp.k14s.io/disable-default-label-scoping-rules: ''
        kapp.k14s.io/deploy-logs: for-new-or-existing
      labels:
        application: cdtn-admin
        component: cdtn-admin
        owner: cdtn-admin
        team: cdtn-admin
        app: ingester-elasticsearch-preprod
    spec:
      containers:
        - name: ingester-elasticsearch-target-preprod
          image: >-
            harbor.fabrique.social.gouv.fr/cdtn/cdtn-admin-ingester-elasticsearch:1.2.3
          imagePullPolicy: IfNotPresent
          resources:
            limits:
              cpu: '2'
              memory: 2Gi
            requests:
              cpu: '2'
              memory: 1Gi
          envFrom:
            - configMapRef:
                name: ingester-elasticsearch-to-preprod
            - secretRef:
                name: ingester-elasticsearch-to-preprod
          env:
            - name: ES_INDEX_PREFIX
              value: cdtn-preprod-v1
      restartPolicy: Never
  ttlSecondsAfterFinished: 86400
"
`;

exports[`INGESTER_ELASTICSEARCH_TARGET=prod kosko generate --env prod jobs/ingester-elasticsearch 1`] = `
"---
apiVersion: v1
kind: ConfigMap
metadata:
  name: ingester-elasticsearch-to-prod
  namespace: cdtn-admin
  annotations:
    app.gitlab.com/app: socialgouv-cdtn-admin
    app.gitlab.com/env: prod
    app.gitlab.com/env.name: prod
    kapp.k14s.io/disable-default-ownership-label-rules: ''
    kapp.k14s.io/disable-default-label-scoping-rules: ''
  labels:
    application: cdtn-admin
    component: cdtn-admin
    owner: cdtn-admin
    team: cdtn-admin
    app: ingester-elasticsearch-prod
data:
  CDTN_ADMIN_ENDPOINT: http://hasura/v1/graphql
  NLP_URL: https://serving-ml.fabrique.social.gouv.fr
  NODE_ENV: production
  LOG_LEVEL: info
---
apiVersion: bitnami.com/v1alpha1
kind: SealedSecret
metadata:
  name: ingester-elasticsearch-to-prod
  namespace: cdtn-admin
  annotations:
    app.gitlab.com/app: socialgouv-cdtn-admin
    app.gitlab.com/env: prod
    app.gitlab.com/env.name: prod
    kapp.k14s.io/disable-default-ownership-label-rules: ''
    kapp.k14s.io/disable-default-label-scoping-rules: ''
  labels:
    application: cdtn-admin
    component: cdtn-admin
    owner: cdtn-admin
    team: cdtn-admin
    app: ingester-elasticsearch-prod
spec:
  encryptedData:
    ELASTICSEARCH_TOKEN_INGEST: >-
      AgCk5DI9bd58i11lb63ZaNkURef9fk490rLNuPc4iHSw/PRS5jtePmGAL8O5xYQT9CKWCuVtghX5T2SqykTU9Ys2QrvKDMxkcKgMXtgM5GvJ6/VdeVeBpLgS4mj7w/DMaLvDJn1/xdep+E5Ilba1+kYtk/ymmej/LZHqLirULWLk3kSvbPgggBDYm6KtSYKcbGlCvEoNOySsFDXWLDyQKievjjARcQIAGB+fc+4X5YojZnxhkuawLP7YMvbleB/8l94Q5rh4LWhXOjT7nbVTyEEQaBvtHgR+urP+GBTflxdJp/FfR+DEJAsG6XB5AP7clVyhbEQN/AVT0tZi6ef9S23FBYDdDRrxUKy5KDg+hz2G8dcOXMSAnGniQsCWwqppLFCXtXKFtcM/PSlMzXRBcS3UtKuQZj6AT+EjQef6tnFkcWeFF4WRE8xoc7aoMUbNF7QgDC74Upz4pvfC/ED5IuVD5wYmM3ddUKWo7+vo1ioKAh8sDJZ8/JvE59qJVfd8se5R5iJtHEc5Tb4jym50aVWOHatOEUDnDP83YnLppA5lYKTdAMUf61MLn+SkBYaJjfvQlo1RraEBqt4FPYFCxq6udSD7nTjy97u+V59E2b35Qtfxa9UZ08cKqijtx2FEbqCMs4V/Yr6hG4I0b4dnKU6PfxEFacIvJIFcp9+eiMhrzW4jqmMIOvzQBJzGzjgoq3/8Wo+B4YcuKaV/M9UWrZvt0TwDIT/XVtZyomU6dLTf8ulXmCMtm82gFqKXeoxhRFT3Tj+2FIiEh8H3pb0=
    ELASTICSEARCH_URL: >-
      AgApXJSrjbrD5Vb12J1m2PC7B+DWtgNpw8GuhIUAkZoCqACgS9C2/pobN3VCa8btJ/7phnNnmgrvy+R2QVcb05ttjXr3hVnhuZF479t9iyBRS2WAEYM2uj7plcLkYNz98TSCxDe6Mqa0udQESwBcEUbxvNu/dRLolfwMwEAgdTdKAP8yPzayGnj43IwtFDfNjqY4feearlZjHiS/Xe/+pCI1OIOVXdTgBrvQ3jc3jl94Gu9vUMxHUbjwo51qNiA0JmM3chEVRAPGphT+AW/3L4aHF6LPtk7SpFj/CGUfK4OiweiAR7Jvc32AkLmc9odx+cwlrUM3eymUYhsXaPi0+BUUD8Bf3rt9S+Hf1LOvq6SnjdvVaeyAZvPgt20xjOhwkyAjHXXt53CMeH/Szr1oUPrDb3woBYWUCB8ydSFGOGp6or8ZPTsQWW5rZ7p9rFKg5BSBmzDt+OWFkzIr6RaGpXQbcdCV4lfK+nKAg/9AzdsnwOcVc0kXrqziupWQ4KUcmeCidf4Hpjz475r5NZg5cCNDaZuvTM1LVU/dW55VLK5lsOpgL65u/1+TIb4DgXZRN7WEbQ5wqz8ONVGlR2r1/T8YHiqEhgS7AVAG0BrrfGbk5iIp4DOIcnZj5QQE5K3THVlDuIwsDdzZ6aEakp+XQGowFD3jDpIdK/hnY6eEKQy4MpJw+nxqX0KNqXDmi4EPu9B2hxBj6Z+7tJw0M1vtbJmpgVdbgShupmDFMfre0OA1milY6q0Vf9Y77DjI/5a2ymAxmL/X+t3N9TReDPT4kSlPGF+Nng==
    ES_LOGS_TOKEN: >-
      AgA8Mc8NL/y85FEL7I2p7RVjb5wa3fvON9086ciLFSXq2VmCbBJZk1HWEZmO0ZHTrDtCTOk7+iciWczX8Np0SCaUTeQheXXLexNThmj8DcT7Ltt7hzV1EaQip78Jc0IBoWWIztDpQHbS3q1CYiUstmr34JwJmA5pu3MUhZW7p95MmXl1CSdl0pOXQwyIKnMIydM05n0nEoyijdvmN1ki5dYkXWGB+biWmbSeqMePsGDAblERFLe0qMfJXtKsy2j7qfSh4KymheSUzL73b933ShjDN/jy2Gw3IdipsgB7+L/de0K4sMOL+NwkjQLjfpOdU4f/x/co0p7cp3JYFJn87oAtu76caNpIE2c0h9wEMhwQPk1QCeOp1Pcp802MPbCPDp0UXbp9IUTdCDleZW1q70z5hDUDQn8t8gdoFOuGim+ZNiHKllUp9g6/19v5EyOgc+FLBO6fv3nNZb21u3mU/dZFPhj79ve6jjWo1JVI7DleATs2qjR0hldkW0lcpQcyCSq4TYGUqd9yUJH4L9WqhRnSE29qxTKeJDamEgRFZCiHk9tnX+iFs72B3VFQtHBthR7lKN1FbKP/bxViGKQMpvkTwxWkYHnL8KE/CLssWTlwNdG7lsHzER2j6AzvzoVlyaszmI4F6B+uJS+sECzfgVbqFNEVk0RHaPSt+fXjtjbfjYoMEZUBrj6I+77WnmzOKfedJbXaz0iggsw36QjrTp5KKEPCo5XLm+aCvREmgf8I9s3qS1ZXw6+BkonCnSyCXaN7sNw2di9wDcZnpu8=
    ES_LOGS: >-
      AgAnj6e5pww05hohMfzPd+PeetLN6PEt8pP32awoTGcA9mZ+EvKfODYAHm2GOs5aviffEGfdJLGrXmzwCTXCVmqqkPDQbESItHAVnyjVLNxdSyvSF2EsHc5G1rRlNkOK7BQcDvgR1wRf0SJLeBD8ZyZBwv5cPdaD2f7EFU7pf02cG8CwlHZLIa7KQ+PooL35pDHMLpBDsc5m0Jr5eZibDl4eRnKHUutVM7n3N/1VXre7U0qLosZIqlWtlhFXZG4CGus6vVPfiw5m6cqCKr9RBDAbizk80/U3t3Dsb6bfJ8AWKZ1krSsxcL2MGsCSW03SJz+6KSh+jB8G3hPuNwt0zTdXJo/5PKg/b0J23lUoFsGtRAEcleNdFAg2Y5rxC/pzMCUarxGNzdKK4ZYpsYQEzJ3ZsXadDBAozgw4eh+Oy9be1OTMPnhL9y0Kn6jbygSgjC4/8uisOUEgGDEUzJEa3oOXqB4QLYUEqh33pvY/Lrmqus6ZNlZLY5Gr8FrP/nIjJXSlOGdTcMhSO2k79T5QnU0z/04Yl2WuguJIrf9dKwI/v2D6Z/jaJ8NZUHO7p3fNkAo1q9Wa3Out4pSPH/aaAG++JXM59IDO0IRBlZS82L150IPUx8j/2+Iyw4xHkpd9V3zZ2h+t0wIvd7N7Lqi0+b92yo6KmRSRdAjzWELPFVfNvq95c1k39UnXXVeQyqUyLZTA9uhd/Tc81KEhDt+8oJ+oZ/IsmMDsn3+GyFBkqfoV0F1XhBmdR3rx4hjiGh3hzJFOwnn5+zcCmF5LnO5K7lYirHXrq2sHZUrLh2zrNeVsVA==
  template:
    metadata:
      name: ingester-elasticsearch-to-prod
      namespace: cdtn-admin
      annotations:
        app.gitlab.com/app: socialgouv-cdtn-admin
        app.gitlab.com/env: prod
        app.gitlab.com/env.name: prod
        kapp.k14s.io/disable-default-ownership-label-rules: ''
        kapp.k14s.io/disable-default-label-scoping-rules: ''
      labels:
        application: cdtn-admin
        component: cdtn-admin
        owner: cdtn-admin
        team: cdtn-admin
        app: ingester-elasticsearch-prod
    type: Opaque
---
apiVersion: batch/v1
kind: Job
metadata:
  annotations:
    app.gitlab.com/app: socialgouv-cdtn-admin
    app.gitlab.com/env: prod
    app.gitlab.com/env.name: prod
    kapp.k14s.io/disable-default-ownership-label-rules: ''
    kapp.k14s.io/disable-default-label-scoping-rules: ''
    kapp.k14s.io/update-strategy: fallback-on-replace
  labels:
    application: cdtn-admin
    component: cdtn-admin
    owner: cdtn-admin
    team: cdtn-admin
    app: ingester-elasticsearch-prod
  name: ingester-elasticsearch-prod
  namespace: cdtn-admin
spec:
  backoffLimit: 0
  template:
    metadata:
      name: ingester-elasticsearch-prod
      annotations:
        app.gitlab.com/app: socialgouv-cdtn-admin
        app.gitlab.com/env: prod
        app.gitlab.com/env.name: prod
        kapp.k14s.io/disable-default-ownership-label-rules: ''
        kapp.k14s.io/disable-default-label-scoping-rules: ''
        kapp.k14s.io/deploy-logs: for-new-or-existing
      labels:
        application: cdtn-admin
        component: cdtn-admin
        owner: cdtn-admin
        team: cdtn-admin
        app: ingester-elasticsearch-prod
    spec:
      containers:
        - name: ingester-elasticsearch-target-prod
          image: >-
            harbor.fabrique.social.gouv.fr/cdtn/cdtn-admin-ingester-elasticsearch:1.2.3
          imagePullPolicy: IfNotPresent
          resources:
            limits:
              cpu: '2'
              memory: 2Gi
            requests:
              cpu: '2'
              memory: 1Gi
          envFrom:
            - configMapRef:
                name: ingester-elasticsearch-to-prod
            - secretRef:
                name: ingester-elasticsearch-to-prod
          env:
            - name: ES_INDEX_PREFIX
              value: cdtn-prod-v1
      restartPolicy: Never
  ttlSecondsAfterFinished: 86400
"
`;
