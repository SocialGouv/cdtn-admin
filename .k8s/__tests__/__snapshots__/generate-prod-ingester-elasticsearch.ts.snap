// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`INGESTER_ELASTICSEARCH_TARGET=preprod kosko generate --env prod jobs/ingester-elasticsearch 1`] = `
"---
apiVersion: v1
kind: ConfigMap
metadata:
  name: ingester-elasticsearch-to-preprod
  namespace: cdtn-admin
  annotations:
    app.gitlab.com/app: socialgouv-cdtn-admin
    app.gitlab.com/env: prod
    app.gitlab.com/env.name: prod
    kapp.k14s.io/disable-default-ownership-label-rules: ''
    kapp.k14s.io/disable-default-label-scoping-rules: ''
  labels:
    application: cdtn-admin
    owner: cdtn-admin
    team: cdtn-admin
    app: ingester-elasticsearch-preprod
data:
  CDTN_ADMIN_ENDPOINT: http://hasura/v1/graphql
  NLP_URL: https://preprod-serving-ml.dev2.fabrique.social.gouv.fr
  NODE_ENV: production
  LOG_LEVEL: info
---
apiVersion: bitnami.com/v1alpha1
kind: SealedSecret
metadata:
  name: ingester-elasticsearch-to-preprod
  namespace: cdtn-admin
  annotations:
    app.gitlab.com/app: socialgouv-cdtn-admin
    app.gitlab.com/env: prod
    app.gitlab.com/env.name: prod
    kapp.k14s.io/disable-default-ownership-label-rules: ''
    kapp.k14s.io/disable-default-label-scoping-rules: ''
  labels:
    application: cdtn-admin
    owner: cdtn-admin
    team: cdtn-admin
    app: ingester-elasticsearch-preprod
spec:
  encryptedData:
    ELASTICSEARCH_TOKEN_INGEST: >-
      AgCQSz5WIJBFNy+qmPjuJXxiO+4FkXtuCUSLSh8xlICM92c/sE0kz1nsrZfU8m3OBJ11HRQeHI9+UtrVeljC0dzG3Yin7IKI/IV4cnE1Thdjya3L9zuSmfFUXlRYkAkP27BbaxBPGATgEddtBHu3aJ5FlV+GsnbHJcp3S5s37X2GYxCyqDmc1XX837mJmYHEsfDbDa1Iqo5aI/FhjlUw8tZ2LMDlDSht2RQ9R85pRHx2s3QrmYxtqEsR8GdXmOL+4VwBbf+ZB/psn45nS+U+x8gUr++PQcTdVT5WN/37ULPlx09vXh/BRQ8OGgc1Bno4onaHIpAcN5Dkbsr1ZNKVXKBh4oF4PD//rcGKZKPYTa55NTMBv/Bgsp0GR5Y127BT90pW3e/oh9Ql0H4+T8cMP8wbyuqZ+Yho5fBXoIoQdqUttn/NfwKs9JWmCcyKTf80aMUOgyLky1Hc5vse6J3tOH/mnv/WD6RAJi4gj/0nYZKoSZ9riOqRyR1ApsdlaXQT3clm4H9qExTLv4sXc+V/PZX5kYpprmNTJJs31RxsKkmEY896eQEwjdGAkMxTSQsae2ju3U55eTJA3yZ7QdWJN95VhfsputMrsEh7gMz0AByWa4tI1iKBdLhlpbHr2Fpbhx0iF4UEEw7XJhkF25/bXf7Lo8GqcJFRn31Aq/LAs/e28oS03BlJ+p21v4jljm+DshlvGfejVy2WeN99jEo3ggKjQ6SKYMAxIOSUPrmYiV7/ucHEutyTd/+iNqlAyCvUiBcLpuizZUioJZW7Q5U=
    ELASTICSEARCH_URL: >-
      AgBIk4c96xAndWKKP6p9DX3dt91v3GPtw6wwEuD5G9c63FsGhcUxelH4fVpjf09/bMKn4vURfAgcrbmvKe6QDQZ9BmsY9E6ov0tQGyc4kz7fwH5YQRMzkN8ZTdVHGJs+oeKkE5JW+NFvwuGJQ9EUkMvRgR+sp0UuCeY41CUv53OZSVBkG2837rSWNWECba+Ptn8g1/q4x0hccmgm4oAoQLKSF6uGh/PGSroehC1SDD70w4z0eVzBufAykBlaxa0Wfr50/7cQmHaHqqswLz+RgpXf/Cej85yEz8pbCxfvVIiYGMIzieolyY+JGY+1vmP5UqhRrLGTQjbLU/ZrAnWejbvBS0nRiGiQqZZlQygiwJKKG5pZ1+MWEvrnfHd3A15FpmQ49c1No9TlbXKJ2/RbJIHnNN2GvsmRkBLhvg1s+UkA0TpAAAnja5m+1PQ2lWQlOKNAEU9nqqetq7UOGB4Iw+2VV3DKKs4JvybKEfebyAR+0VEpQ63KROhwTfv+uHI0d5J4pGW0PK2AkeJVdvhOfEGyzuVBNYRSKLJ1g7w0+hRg8GQq2xwZlcYTS2GZWGhLvmJcLtRq59G6vk7bhCpGyx3ITlkZ3UwzaMEsjm4Ac1dSlZhXpZaS4GIRjS3jUZxvag6wkzNcpu7WGcGFlntPavBMillRx0dM9LV47bSWXRdHAVOvLVCKE5dCmEsVVH/WQjPf82OAjnG+uqNOLnpTZCxoWBEJlTmtoby6iKGTMoHX++WtdU/+/MGPGKe1xnuAcyJq+dLN28WFMn5y1xuRzV0TLRFz
    ES_LOGS: >-
      AgCXwRBIIW3EATg9jvI8fhV2/oF7WUuImB77k108JIul8PtkKq6d7E+s7atlrLCUIVI18dZmH4y3mSmmuRiaL5IIiQzjjTAJa0XgQltx/gLrKGTOcl5bfZRHnhofx0I/dXXeBnUhqLqszYxU8ebqiu7jvX61zIP+LM+rN2E82F8EBh/ylTHb0AFkpCb2lUkl294B5xot94DpgpijQhgbfRIP08gqGUetORw0/eG2Pq+jZxai0Ps9D2Ptbt/LHXUIXEhdaDXMWhyvfY/eL9M4e1OFP7R6iT+gJ3RhBoM0yLGLn/pS+HoPYfRXbKbb9kIkcfZUZ9a66ih5JxUolIX1MF7i/Qrj+vm8gzGKaGqtCufaF0N2OV3b5bjLyFRmh9f87K9/9x9Bw5+0yBzGKTbU7iuMlDpJM5zNy4D8UoSTzFY7zC5wvxZeiVznvTXvcYYMqhv5glqNk9mS5FXxdpF1ZE0bFT4A+uZL0bAmcnu6xAqkA8fsILEXEFAqTpMR5EvKF7ttpANb998ciGXWNf4hTxY311trEFhRZVVm8R+rwatiesAYzak+Q+H5Xywe/0lcKEg39cj9OtG9NtfJMdpcO5nYmD/ynjswM2mVFMGLVQjwsxbndXqeyhnn/4iR4/2VKitj9w+3+Ibp0pyHt1YasQCn9xIvDUfvRi7ArZrnpzO1CUlsD9WcjhHVuw24mQkuNwIKBRBjqNd/zbLGb9uPAPtm+JX9esdTPCDy/6RkXylTs9HgLcpyhGIib5CNu7wyYt4Xs/I4RVho2asuVsxwk9QSffhCcXMgql9icFVNmrZa3w==
    ES_LOGS_TOKEN: >-
      AgCpJsriDAMRK68k2I0RRj2hJlMGGacgoCupFZziT1Bu+4O3XNYzEIgDQwSRu0Ss9hyXiiXmjEOmPbklVYruuhum/KI8dNgf/J2qFv3GTFmbJ5OdnYsF0BYKfLNkxH8MQKv8UaY5MWydE0+VoYG7PKZvvJGlkeDL2NwcHUJcActARJkZHsSEIOJh9owFPyYjuF0NufIymfu0TS5iIQm6OJdB1PXPT5wvYgjcc9p6VeBolsTXYyjS2HOQs9r6mRQiSS5oS+iZEOSESxkWqqLzxSx9GBsvhe0moX6DImtZxVoX4m7ZmL5Z6j3ldYF5HNpkbTpSVpIiMdZAWDp8ClPwqTyNQVQWtPBJZCZoQLHKXLbs/72iS6faykjlFeVy3l4y52IQKKnWTLgM6rGDR3EyMGIdw658tczkDIeji4Q3MHMPcEUk+RqwPA9FcKhMRTK9LyXwz9zqUTpT+KYuJ85en4cfDJNE2G+bAO492aclQ99Ss1+1wlQffs2GUS645yq0SSrUvMOrIsEaMtYAM25vaUnJb17sX7KTkCvTXLThMRS0ddbfTol76mGEzY/OeSXHDQh3iAmraEub5hNIUqqG2Aa/RuN5OEQVilKrmxp809ZJIiL3/tZY06ycybMNSYFHinW9AAvGxAWaUd9XM8sN74O3gdyE1qCEZp2GsFQdaKM5qFJZiERNRir9yBIPRBpKfSy+g1dTXG3IUc/uQ+RPQrLG1adaFyhwiNPl+aaRJ+8VQ+syzWnyAHU1sDhYhDXSMSlm+7r4NKOTu8FnxiY=
  template:
    metadata:
      name: ingester-elasticsearch-to-preprod
      annotations:
        app.gitlab.com/app: socialgouv-cdtn-admin
        app.gitlab.com/env: prod
        app.gitlab.com/env.name: prod
        kapp.k14s.io/disable-default-ownership-label-rules: ''
        kapp.k14s.io/disable-default-label-scoping-rules: ''
      labels:
        application: cdtn-admin
        owner: cdtn-admin
        team: cdtn-admin
        app: ingester-elasticsearch-preprod
    type: Opaque
---
apiVersion: batch/v1
kind: Job
metadata:
  annotations:
    app.gitlab.com/app: socialgouv-cdtn-admin
    app.gitlab.com/env: prod
    app.gitlab.com/env.name: prod
    kapp.k14s.io/disable-default-ownership-label-rules: ''
    kapp.k14s.io/disable-default-label-scoping-rules: ''
    kapp.k14s.io/update-strategy: fallback-on-replace
  labels:
    application: cdtn-admin
    owner: cdtn-admin
    team: cdtn-admin
    app: ingester-elasticsearch-preprod
  name: ingester-elasticsearch-preprod
  namespace: cdtn-admin
spec:
  backoffLimit: 0
  template:
    metadata:
      name: ingester-elasticsearch-preprod
      annotations:
        app.gitlab.com/app: socialgouv-cdtn-admin
        app.gitlab.com/env: prod
        app.gitlab.com/env.name: prod
        kapp.k14s.io/disable-default-ownership-label-rules: ''
        kapp.k14s.io/disable-default-label-scoping-rules: ''
        kapp.k14s.io/deploy-logs: for-new-or-existing
      labels:
        application: cdtn-admin
        owner: cdtn-admin
        team: cdtn-admin
        app: ingester-elasticsearch-preprod
    spec:
      containers:
        - name: ingester-elasticsearch-target-preprod
          image: >-
            harbor.fabrique.social.gouv.fr/cdtn/cdtn-admin-ingester-elasticsearch:1.2.3
          imagePullPolicy: IfNotPresent
          resources:
            limits:
              cpu: '2'
              memory: 2Gi
            requests:
              cpu: '1'
              memory: 1Gi
          envFrom:
            - configMapRef:
                name: ingester-elasticsearch-to-preprod
            - secretRef:
                name: ingester-elasticsearch-to-preprod
          env:
            - name: ES_INDEX_PREFIX
              value: cdtn-preprod-v1
      restartPolicy: Never
  ttlSecondsAfterFinished: 86400
"
`;

exports[`INGESTER_ELASTICSEARCH_TARGET=prod kosko generate --env prod jobs/ingester-elasticsearch 1`] = `
"---
apiVersion: v1
kind: ConfigMap
metadata:
  name: ingester-elasticsearch-to-prod
  namespace: cdtn-admin
  annotations:
    app.gitlab.com/app: socialgouv-cdtn-admin
    app.gitlab.com/env: prod
    app.gitlab.com/env.name: prod
    kapp.k14s.io/disable-default-ownership-label-rules: ''
    kapp.k14s.io/disable-default-label-scoping-rules: ''
  labels:
    application: cdtn-admin
    owner: cdtn-admin
    team: cdtn-admin
    app: ingester-elasticsearch-prod
data:
  CDTN_ADMIN_ENDPOINT: http://hasura/v1/graphql
  NLP_URL: https://serving-ml.fabrique.social.gouv.fr
  NODE_ENV: production
  LOG_LEVEL: info
---
apiVersion: bitnami.com/v1alpha1
kind: SealedSecret
metadata:
  name: ingester-elasticsearch-to-prod
  namespace: cdtn-admin
  annotations:
    app.gitlab.com/app: socialgouv-cdtn-admin
    app.gitlab.com/env: prod
    app.gitlab.com/env.name: prod
    kapp.k14s.io/disable-default-ownership-label-rules: ''
    kapp.k14s.io/disable-default-label-scoping-rules: ''
  labels:
    application: cdtn-admin
    owner: cdtn-admin
    team: cdtn-admin
    app: ingester-elasticsearch-prod
spec:
  encryptedData:
    ELASTICSEARCH_TOKEN_INGEST: >-
      AgCZl9M1ddt4LrKZ4vzeCTPHWh14YInv3F33FUish1DgV3BTylBMV+ab5cEoKptML1bRiDPLTkFFV+VowTzlJpdrDDOJcI9+/JQa/lRhsHvibrq/4OHZJ2ATgs/rXK9j53Nlq7rKxSMeoLBbz+M3XhDr7++g/Q6rplpnzbnU7xjHAdulxAkP51KClcWoXF9XBA5pRMRAHDHgGPOScp974n2btTXPMoiDU66ePMJJfhMX1C4A9lQYFhDeIpdYsXMt5ZTbNODN60vX96TqcpehYx3HF9fPu6wpxtAK7s6lVlket1DIaNjv9MiJnPwxOApeNEJ9Obg+GPzrQJJKOVEDbmVWx86EyEOLiuNNNGxDfcCD9OSXXb6yq01dX9Jme/nZf0M6SYVdd2gR1g2DlFiLqhPl6wriRqy6LSmc3AUktTmQDQIy54OI05RxNBt7nRLR2S0u+n3PGCliFsMpnXZ4CwqtrY4Kg9JAm0RCl5mwl/6WKNPMEw3Aj7gg409VdM16O6EBN1F2UWkf0qj5eor3WdWMTKYyRy6k4ZDqfG9Se9i2Z7ZwZRiLQbWSy67qZRdF4BYkIAU3Bs3QXjTXdFth14kf57DejNlYKj7qM5bFEIFqr6QgNQvR48Nt89mShJHWyb1/Ek2eqA2lfMnm1NYXKQnbIWw/19mu/myAEOO2N05WujERObihmT0EpjsTh2r8a/rvl95gobsa4d3gJbqbccHejynIIPXoSpmF/N7UW7ClFICerhViO79+YKAtcelyCqi1/vm9B1JZJbIRBOQ=
    ELASTICSEARCH_URL: >-
      AgAXmj+v16wuFkXlD5Ns4utQv+5CQya87qHFXlQ1sp+NTF+tC9SjaZPsTR/joXhCTthNJAF0FMrAunubLvBFMH6d2W0EicLG+KAv/yS6xwaMutS9Q3Vv2OBX185LlqwpHTvc4xi32JzGIvYRmj8kLk/hncPV83gWyt31VmFbw/SqaMaSQxr6Dd/1a8wL88kitHRs+vv/vIyvy4b7qrOa37xnhzg1stmEvTL/qkB2VsB/KG26039yXnofZX0nCO+Nj/PRTeMJiYZhaLEE4Gzb7+ia+x2x9JuhqDg5R3rCD0rnynELDm/U4NV45NHSF+VLjlV/Ti10zblQG/F/YdnaniwB2CtRA10XGJlwrG3d2wCabGDG0Z0KO152FcbGP4pAg9kbZ4vYF3gMEyYBEHEow9lJ28DvNYmIIfu/d0mB0lhWvWOtGGfTK5k+uoNd9sUoIb6JUClvrNx8LRo6X4SkTBUIFl3x5MbOXa1zzi6DKGkYFLF2R9VzVEAlGqiGM2yjpsC2v4gC18USnfHSSfeNIpvmOTIGhNO0aRRQ0QeZjG9IJiIPJRuQTYAOODsYf6fOlYJ8m/owMrhPas3e5qQH+siRpp/Ttn+xG1cKGB64XAEfEsFamoAzXRvjmR31WfZc9aPkDYAa0caMPo6SDSeAOmsEcI/RNJJILmKsIWuEIgnmmsTxjBqdiCKQ/9xDWCBzWzwIKZ1fFTu/a/0ZRgO/HHsFL9YVs/0xB/brCMuPSpEqg1jHgEdn1jxgx9Bsk2Nky4L850qGsnRw0pF96T7WEjVnG+48cA==
    ES_LOGS_TOKEN: >-
      AgCRGpTBEiRnsXj/prFRxRmqU0OAPzEnl9IYCnHNd+c5NJFIre+7ppmP0rLvikDcVWdpVP5heHTnqqMw5laV0/30q2gVdyHrwVwTtjHzc0Y4u/yOWewA1b7Q+QYqLLDhRb3U0ZZtrWFj7bqCIE3/QZjGdR6cPodcNzeeTpt8HIjTAUKfyRRqYXAncMJ1qLO8H+dSDNn0G9HGK2aB4od4plg2Fehwv3Ho71Ih0CZku1YVCXEK22QXgYIKOcI//wJxtDGM+B7rGoUrkBrzwYhkZz+qgk1+QrbCEFXhhbpjaIKTkcc04Vm3ewWbNNqIdLsuudm43FBkPJGDG4X5K9Kg5+Z1VfJLTmGQiMM5pGgDTw9wi/0lB77CZmB0G15oRqxmirhdW+Z0lD+KLOYqXv50lQf3tSjyfinZgW8h07oqBdS+jcXZpVaYzYBk8C/RwSSJSd4fsEtA9z25JZ2rNbAbbUoTKJOWVPTD7aQNVeU9zEcgU1RpfRrs8zxs6h0H1EZyMmA7z78O3iaw8nV58bb/paFy2oxNmxZ4VTm6B4cwvOIlsOKzRjAFor/jVD+QqWmTGxLUj0vOmtCylWAersUNL8ojjHjZi4PGVtn+q3RXZw4Hv5/fOF/FUfds1vYKi9BiON7TakHh8OhVSBlKvJwBzwVAfLfJz47Efl4dQaeRnzgqX9hx5DhjJsmVGJlb9eYWnKAIwdA9cOMjS4dGR1djtg+rmRkPoB81qvr+QK/Oq4uD2cQDokGejuYkF0V7iU9Fj4lcppnBdOuhsS/HITg=
    ES_LOGS: >-
      AgCtN27seR+BtkdnIFNoz5tGKfps+yw1o0+uCpS1dOgobyjj+WQSxzWeNIDzenIhXOV4cLz02lt0jtdVUJRx9SjDZv+2/cLZN7TyeapWUObZzBOSFyk3o/FG3CTa8XFeKvHe9+QGoneL4W8b4FPlgwpbn1NbeCN3FN2a8uG9Q8Ma6QQiWZn20Nr6zt4CjYAAudwNfb6JdNGOU/EihU8NDtEy9lrMovKLyyM3dcFiUhtl2jAJndmRfywGisuLB/ifYF0xgUmK5XwCxgeGbSCYsIFa+38B/zpxzN7sGn8pG/M4cNMGwUptQYILaehxJXUMoyp7bpsH8a5kqVqFRAGreCJIFjbGRFi+s+p3VK441rIoVH2Gq0O5oVfB3E/wcQsQANozfKB42zFcuTpTcU4qe7c3UGMWuFGlRqobErgIUJ9HaIFaFcv095CwAbu6xaqxO7WkIJWepxn2dCs1uRoqK1R75wvgLOy5aQWJ2e9/ePiGqaDZRAkECEcrFdvmKI0RDVWeoaougtBcAwnrm08KSYlQbkwnIjhb9Ide4K2duK+/2rloGObgWHlCjXJqWDy4byor4e+T8Ypu/mqoCBc+NKIdes4aTwMISTyTGMAiIIzzJU8FnOUqFl9voZXJafo1PrtEPBL179nGFQJMkpQpXFaOSgm6c/gdWpHNl0ltm94Nm9aIsrSSZU2dk8UO/t3FyuNGavxjV9Hx3Wr3O9YsT5hn2kxiOVlPz5u2JGaBRenCYhd9w9fLEDJwn8ZV6dAeZogs0QtwesTm0IXDVVs=
  template:
    metadata:
      name: ingester-elasticsearch-to-prod
      namespace: cdtn-admin
      annotations:
        app.gitlab.com/app: socialgouv-cdtn-admin
        app.gitlab.com/env: prod
        app.gitlab.com/env.name: prod
        kapp.k14s.io/disable-default-ownership-label-rules: ''
        kapp.k14s.io/disable-default-label-scoping-rules: ''
      labels:
        application: cdtn-admin
        owner: cdtn-admin
        team: cdtn-admin
        app: ingester-elasticsearch-prod
    type: Opaque
---
apiVersion: batch/v1
kind: Job
metadata:
  annotations:
    app.gitlab.com/app: socialgouv-cdtn-admin
    app.gitlab.com/env: prod
    app.gitlab.com/env.name: prod
    kapp.k14s.io/disable-default-ownership-label-rules: ''
    kapp.k14s.io/disable-default-label-scoping-rules: ''
    kapp.k14s.io/update-strategy: fallback-on-replace
  labels:
    application: cdtn-admin
    owner: cdtn-admin
    team: cdtn-admin
    app: ingester-elasticsearch-prod
  name: ingester-elasticsearch-prod
  namespace: cdtn-admin
spec:
  backoffLimit: 0
  template:
    metadata:
      name: ingester-elasticsearch-prod
      annotations:
        app.gitlab.com/app: socialgouv-cdtn-admin
        app.gitlab.com/env: prod
        app.gitlab.com/env.name: prod
        kapp.k14s.io/disable-default-ownership-label-rules: ''
        kapp.k14s.io/disable-default-label-scoping-rules: ''
        kapp.k14s.io/deploy-logs: for-new-or-existing
      labels:
        application: cdtn-admin
        owner: cdtn-admin
        team: cdtn-admin
        app: ingester-elasticsearch-prod
    spec:
      containers:
        - name: ingester-elasticsearch-target-prod
          image: >-
            harbor.fabrique.social.gouv.fr/cdtn/cdtn-admin-ingester-elasticsearch:1.2.3
          imagePullPolicy: IfNotPresent
          resources:
            limits:
              cpu: '2'
              memory: 2Gi
            requests:
              cpu: '1'
              memory: 1Gi
          envFrom:
            - configMapRef:
                name: ingester-elasticsearch-to-prod
            - secretRef:
                name: ingester-elasticsearch-to-prod
          env:
            - name: ES_INDEX_PREFIX
              value: cdtn-prod-v1
      restartPolicy: Never
  ttlSecondsAfterFinished: 86400
"
`;
