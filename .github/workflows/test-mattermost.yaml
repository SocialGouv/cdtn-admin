name: ðŸ§ª Test Mattermost Notification
on:
  workflow_dispatch:
  pull_request:
    types: [opened, synchronize, reopened]

jobs:
  test-mattermost:
    name: "Test Mattermost Notification"
    runs-on: ubuntu-latest
    steps:
      - name: Send test message to Mattermost
        uses: mattermost/action-mattermost-notify@master
        with:
          MATTERMOST_CHANNEL: s/cdtn/administration-veille
          MATTERMOST_WEBHOOK_URL: ${{ secrets.MATTERMOST_WEBHOOK_URL }}
          TEXT: |-
            ðŸ§ª **Test de notification Mattermost** sur la PR #${{ github.event.pull_request.number }}

            **DÃ©tails :**
            - Repository: ${{ github.repository }}
            - Branch: ${{ github.head_ref }}
            - Auteur: ${{ github.actor }}
            - [Logs](${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }})

            âœ… Test rÃ©ussi !
